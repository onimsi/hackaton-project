<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Login</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="./assets/css/login.css">
  </head>
  <body>
     <div class="login-form-container">
        <form action="#" id="ourForm" >
          <h3>user login</h3>
          <input type="email" placeholder="Email" class="box" id="mail">
          <input type="password" placeholder="Password" class="box" id="password">
          <p> forget your password <a href="./ecommerce-website-main/index.html">click here</a> </p>
          <button type="button"  class="btn" onclick="check()">log in</button>
          <p>or login with</p>
          <div class="buttons" >
              <a href="#" class="btn1"> google </a>
          </div>
          <p> don't have an account <a href="./client_reg.html">create one</a> </p>
        </form>
  
      </div>


    <script>
      const baseUrl = 'http://localhost:5000'
      // form validation
      const email= document.getElementById("mail")
      email.addEventListener("input",(e)=>{
        if(email.validity.typeMismatch){
          email.setCustomValidity("Input a valid Email");
          email.reportValidity();
        } else{
          email.setCustomValidity(" ");
        }
      });


      // login validation
      function check(){
        
        const email = document.getElementById("mail").value
        const password = document.getElementById("password").value

        const loginObj = {email, password}

        console.log(loginObj)

      localStorage.setItem('loginObj', JSON.stringify(obj)) 

      fetch(`${baseUrl}/login`, {
        method: "post",
        body: JSON.stringify(loginObj)
      })
        .then((response) => response.json())

        .then((loginObj) => {
          console.log('Success:', loginObj);
         })
        .catch((error) => {
          console.error('Somthing went wrong', error);
        });
      
      }



      // // working with the data
      // const ourForm= document.getElementById("ourForm")

      // ourForm.addEventListener('submit', function(e){
      //  e.preventDefault()  //prevent page from reloading when form is submitted or prevent the form from been sent by canceling the event
      
      //  formData = new FormData(this); // making a new form data object based on the main form

      
    </script>

  </body>
</html>